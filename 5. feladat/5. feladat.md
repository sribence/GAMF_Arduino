# üì° IR kommunik√°ci√≥ k√©t Arduino vagy t√°vir√°ny√≠t√≥ k√∂z√∂tt

Ez a projekt megtan√≠t arra, hogyan tudunk **infrav√∂r√∂s (IR) **f√©nnyel adatokat **k√ºldeni egyik eszk√∂zr≈ël a m√°sikra** ‚Äì p√©ld√°ul egy t√°vir√°ny√≠t√≥r√≥l egy LED-re, vagy ak√°r **k√©t Arduino k√∂z√∂tt**.
Az IR kommunik√°ci√≥ olyan, mint egy **l√°thatatlan f√©nyalap√∫ post√°s**, aki apr√≥ **adatokat visz egyik helyr≈ël a m√°sikra**.
A projekt els≈ë r√©sz√©ben megtanuljuk, hogyan lehet egy **IR t√°vir√°ny√≠t√≥val LED-et kapcsolni**, majd k√©s≈ëbb karaktereket √©s **sz√∂vegeket is elk√ºld√ºnk k√©t Arduino k√∂z√∂tt**. A v√©g√©n m√©g egy **titkos√≠tott √ºzenetk√ºld√©st** is megval√≥s√≠tunk, ahol az egyik Arduino elrejti az √ºzenetet, a m√°sik pedig megfejti!


---

## üß∞ Sz√ºks√©ges alkatr√©szek

| Eszk√∂z             | Megjegyz√©s                         |
|--------------------|------------------------------------|
| 2 db Arduino UNO   | Ad√≥ √©s vev≈ë                        |
| IR LED             | K√ºld√©shez                          |
| IR vev≈ë (pl. TSOP1838) | Fogad√°shoz                     |
| 220Œ© ellen√°ll√°s    | IR LED el√©                         |
| Nyom√≥gomb          | IR LED aktiv√°l√°s√°hoz               |
| LED                | Visszajelz√©s, tesztel√©shez         |
| Breadboard + k√°belek |                                 |

---

## üìê Bek√∂t√©si √°bra
![8x8 matrix connecting diagram](/5.%20feladat/5-1.png)
> _Figure 1: IR LED BEK√ñT√âSE_


> [!NOTE]
> Az IR LED-nek egy 220Œ© ellen√°ll√°son kereszt√ºl kell kapcsol√≥dnia az Arduino digit√°lis l√°b√°hoz.  
> Az IR vev≈ë 3 l√°bbal rendelkezik: **OUT** ‚Üí Arduino digit√°lis bemenet, **VCC**, **GND**.

---

## üîÑ Projekt l√©p√©sek

### 1. IR t√°vir√°ny√≠t√≥ alap tesztel√©se
Els≈ëk√©nt kipr√≥b√°ljuk, hogy a t√°vir√°ny√≠t√≥ milyen jeleket k√ºld az Arduin√≥nak. Ezeket sz√°mk√©nt (k√≥dk√©nt) fogjuk l√°tni a soros monitoron, √≠gy megtanuljuk, hogyan lehet egy k√ºls≈ë eszk√∂z jeleit ‚Äûelkapni‚Äù √©s feldolgozni.


```cpp
#include <IRremote.h>

int vevoPin = 11;
IRrecv irVevo(vevoPin);
decode_results eredmeny;

void setup() {
  Serial.begin(9600);
  irVevo.enableIRIn();
}

void loop() {
  if (irVevo.decode(&eredmeny)) {
    Serial.println(eredmeny.value, HEX);  // ki√≠r√°s HEX-ben
    irVevo.resume();
  }
}
```
> [!NOTE]
> A legt√∂bb t√°vir√°ny√≠t√≥ el≈ëre defini√°lt gombk√≥dokat k√ºld. A HEX k√≥dokat √©rdemes fel√≠rni √©s k√©s≈ëbb azonos√≠tani.
---


### 2. Egygombos LED vez√©rl√©s IR t√°vir√°ny√≠t√≥val
Ha m√°r ismerj√ºk a gombk√≥dokat, akkor p√©ld√°ul azt mondhatjuk a programnak: ‚Äûha megnyomj√°k a POWER gombot, akkor kapcsold fel a LED-et‚Äù. Ez a legegyszer≈±bb, m√©gis nagyon l√°tv√°nyos IR-vez√©rl√©s ‚Äì t√°volr√≥l ir√°ny√≠tott kapcsol√≥!


```cpp

#include <IRremote.h>

int vevoPin = 11;
int ledPin = 7;
IRrecv irVevo(vevoPin);
decode_results eredmeny;

void setup() {
  pinMode(ledPin, OUTPUT);
  irVevo.enableIRIn();
}

void loop() {
  if (irVevo.decode(&eredmeny)) {
    if (eredmeny.value == 0xFFA25D) { // pl. POWER gomb
      digitalWrite(ledPin, !digitalRead(ledPin));
    }
    irVevo.resume();
  }
}
```

> [!NOTE]
> Az 0xFFA25D √©rt√©k a POWER gomb p√©ld√°ul ‚Äì ez a teszted sor√°n kider√ºlhet. M√°s gombokra is lehet b≈ëv√≠teni.
---

### 3. Karakterk√ºld√©s IR LED-del
Most m√°r nem t√°vir√°ny√≠t√≥t haszn√°lunk, hanem egy m√°sik Arduino-t, ami IR LED seg√≠ts√©g√©vel bet≈±ket k√ºld a m√°siknak. A vev≈ë Arduino ki√≠rja a kapott karaktert, mintha levelet kapna. Ez m√°r val√≥di digit√°lis adatk√ºld√©s.
üì∑ √öjabb bek√∂t√©s
![8x8 matrix connecting diagram](/5.%20feladat/5-2.png)
> _Figure 1: IR  LED BEK√ñT√âSE_

**Ad√≥ k√≥dja:**
```cpp
#include <IRremote.h>

IRsend irKuldo;
char karakter = 'A';

void setup() {
  // IR k√ºld√©shez nem kell pinMode()
}

void loop() {
  irKuldo.sendNEC(karakter, 8);  // 8 bites adat
  delay(1000);
}
```

**Vev≈ë k√≥dja:**
```cpp
#include <IRremote.h>

int vevoPin = 11;
IRrecv irVevo(vevoPin);
decode_results eredmeny;

void setup() {
  Serial.begin(9600);
  irVevo.enableIRIn();
}

void loop() {
  if (irVevo.decode(&eredmeny)) {
    char betu = (char)(eredmeny.value & 0xFF);
    Serial.print("Karakter: ");
    Serial.println(betu);
    irVevo.resume();
  }
}
```

> [!NOTE]
> Az & 0xFF maszkol√°s kiszedi a legals√≥ 8 bitet, √≠gy egy ASCII karakterk√©nt √©rtelmezhet≈ë az IR k√≥d.
---

### 4. Sz√∂veges √ºzenet √°tvitele IR-en kereszt√ºl
Ebben a l√©p√©sben m√°r nem csak egy bet≈±t, hanem egy teljes sz√≥t vagy mondatot k√ºld√ºnk karakterenk√©nt. A vev≈ë sz√©pen √∂sszef≈±zi a bet≈±ket, √©s megjelen√≠ti, amit k√ºldt√ºnk. Ez az alapja a vezet√©k n√©lk√ºli kommunik√°ci√≥nak.

Ad√≥ (k√ºld egy teljes karakterl√°ncot, egyes√©vel):


```cpp
#include <IRremote.h>

IRsend irKuldo;
char uzenet[] = "HELLO";
int index = 0;

void setup() {}

void loop() {
  irKuldo.sendNEC(uzenet[index], 8);
  index++;
  if (uzenet[index] == '\0') index = 0;
  delay(1000);
}
Vev≈ë (√∂sszef≈±zi az √©rkez≈ë karaktereket):
cpp
M√°sol√°s
Szerkeszt√©s
#include <IRremote.h>

IRrecv irVevo(11);
decode_results eredmeny;
String bejovo = "";

void setup() {
  Serial.begin(9600);
  irVevo.enableIRIn();
}

void loop() {
  if (irVevo.decode(&eredmeny)) {
    char betu = (char)(eredmeny.value & 0xFF);
    bejovo += betu;
    Serial.println(bejovo);
    irVevo.resume();
  }
}
```

> [!NOTE]
> Ilyen m√≥don karakterenk√©nt √©p√≠thet√ºnk sz√∂veget. √ârdemes id≈ëalap√∫ szepar√°tort vagy vez√©rl≈ëkaraktert haszn√°lni az √∫j √ºzenetekhez.
---

### 5. Extra: Titkos√≠tott √ºzenetk√ºld√©s (pl. Caesar-k√≥d)
A k√ºld√∂tt √ºzenetet elrejtj√ºk egy egyszer≈± tr√ºkkel (pl. minden bet≈±h√∂z hozz√°adunk 3-at), √≠gy ha valaki csak √∫gy lehallgatn√°, nem tudn√° elolvasni. A vev≈ë viszont tudja a tr√ºkk√∂t (pl. kivon 3-at), √©s vissza tudja fejteni az eredeti sz√∂veget.
Ez a r√©sz j√°t√©kos, de komoly t√©m√°t is √©rint: a titkos√≠t√°st!


### Ad√≥ ‚Äì Caesar 3 l√©p√©ses eltol√°ssal:

```cpp
char uzenet[] = "SZIA";

void loop() {
  for (int i = 0; i < strlen(uzenet); i++) {
    char kodolt = uzenet[i] + 3;
    irKuldo.sendNEC(kodolt, 8);
    delay(500);
  }
  delay(3000);
}
```

### Vev≈ë ‚Äì Visszafejt√©s:
```cpp
char titkos = (char)(eredmeny.value & 0xFF);
char dekodolt = titkos - 3;
Serial.print("Eredeti: ");
Serial.println(dekodolt);
```

> [!NOTE]
> Ez a Caesar-k√≥d egyszer≈± sz√∂vegeltol√°son alapul. Nagybet≈±kkel m≈±k√∂dik j√≥l, de k√∂nnyen b≈ëv√≠thet≈ë m√°s m√≥dszerekre.
---

### 6. Arduino gombbal vez√©relt LED egy m√°sik Arduino-n IR-en kereszt√ºl
Ebben a l√©p√©sben az egyik Arduino figyeli, hogy megnyomtunk-e egy gombot, √©s ha igen, k√ºld egy IR jelet. A m√°sik Arduino ezt a jelet fogadja, √©s ennek hat√°s√°ra bekapcsolja vagy kikapcsolja a saj√°t LED-j√©t. Ez a megold√°s olyan, mintha egy saj√°t vezet√©k n√©lk√ºli t√°vir√°ny√≠t√≥t √©p√≠ten√©l, de nem egy klasszikus t√°vvez√©rl≈ëvel, hanem egy m√°sik Arduin√≥val.
Ez az els≈ë l√©p√©s afel√©, hogy t√∂bb mikrokontroller egy√ºttm≈±k√∂dj√∂n, √©s vezet√©k n√©lk√ºli vez√©rl√©st val√≥s√≠tsunk meg ak√°r saj√°t gombokkal.

üì∑ √öjabb bek√∂t√©s
![8x8 matrix connecting diagram](/5.%20feladat/5-4.png)
> _Figure 1: RGB LED √âS GOMB BEK√ñT√âSE_





**üîÅ Ad√≥ Arduino (gomb figyel√©se √©s IR jel k√ºld√©se)**
```cpp
#include <IRremote.h>

const int gombPin = 7;
IRsend irKuldo;

void setup() {
  pinMode(gombPin, INPUT_PULLUP);
}

void loop() {
  if (digitalRead(gombPin) == LOW) {
    irKuldo.sendNEC(0x10, 8); // 0x10 = LED be
    delay(500);
  }
}
```

**üîÅ Vev≈ë Arduino (IR jel alapj√°n LED kapcsol√°sa)**
```cpp
#include <IRremote.h>

IRrecv irVevo(11);
decode_results eredmeny;
const int ledPin = 6;
bool allapot = false;

void setup() {
  pinMode(ledPin, OUTPUT);
  irVevo.enableIRIn();
}

void loop() {
  if (irVevo.decode(&eredmeny)) {
    if ((eredmeny.value & 0xFF) == 0x10) {
      allapot = !allapot;
      digitalWrite(ledPin, allapot);
    }
    irVevo.resume();
  }
}
```

> [!NOTE]
> Ez a feladat egy egyszer≈± "t√°vir√°ny√≠t√≥ n√©lk√ºli" vez√©rl√©s: egy Arduino gombnyom√°sa kapcsolja egy m√°sik LED-j√©t IR-en kereszt√ºl.

---

### 7. K√ºls≈ë IR t√°vir√°ny√≠t√≥val RGB LED sz√≠nvez√©rl√©s
Ebben a feladatban egy hagyom√°nyos IR t√°vir√°ny√≠t√≥t haszn√°lunk arra, hogy k√ºl√∂nb√∂z≈ë sz√≠neket jelen√≠ts√ºnk meg egy RGB LED-en. Minden gombhoz egy sz√≠n van hozz√°rendelve, p√©ld√°ul piros, z√∂ld vagy k√©k. A t√°vir√°ny√≠t√≥ gombj√°t megnyomva az Arduino felismeri a k√≥dot, √©s ennek megfelel≈ëen √°ll√≠tja be a LED sz√≠neit. √çgy t√°volr√≥l tudjuk vez√©relni a f√©nyeket, ak√°r √∫gy, mint egy egyszer≈± vil√°g√≠t√°svez√©rl≈ë.
Ez a feladat seg√≠t meg√©rteni, hogyan dolgozzuk fel a k√ºl√∂nb√∂z≈ë jeleket, √©s hogyan haszn√°ljuk fel ≈ëket elt√©r≈ë m≈±veletekhez ‚Äì p√©ld√°ul sz√≠nkever√©shez vagy hangulatvil√°g√≠t√°s vez√©rl√©s√©hez.









```cpp
#include <IRremote.h>

IRrecv irVevo(11);
decode_results eredmeny;
int piros = 3, zold = 5, kek = 6;

void setup() {
  irVevo.enableIRIn();
  pinMode(piros, OUTPUT);
  pinMode(zold, OUTPUT);
  pinMode(kek, OUTPUT);
}

void loop() {
  if (irVevo.decode(&eredmeny)) {
    unsigned long kod = eredmeny.value;

    if (kod == 0xFF0000) {          // gomb 1 ‚Üí piros
      analogWrite(piros, 255); analogWrite(zold, 0); analogWrite(kek, 0);
    } else if (kod == 0x00FF00) {   // gomb 2 ‚Üí z√∂ld
      analogWrite(piros, 0); analogWrite(zold, 255); analogWrite(kek, 0);
    } else if (kod == 0x0000FF) {   // gomb 3 ‚Üí k√©k
      analogWrite(piros, 0); analogWrite(zold, 0); analogWrite(kek, 255);
    }

    irVevo.resume();
  }
}
```
> [!NOTE]
> A HEX k√≥dokat a saj√°t t√°vir√°ny√≠t√≥d alapj√°n m√≥dos√≠tsd. Ezek jellemz≈ëen m√°s √©rt√©kek lesznek ‚Äì el≈ësz√∂r teszteld le a decode_results.value-t, √©s √≠rd fel az egyes gombokhoz tartoz√≥ k√≥dokat.



---
üéì Mit tanulunk ebb≈ël?
- Mi az az IR kommunik√°ci√≥, √©s hogyan haszn√°ljuk egyszer≈± adatk√ºld√©sre.
- Hogyan lehet jelet fogadni egy t√°vir√°ny√≠t√≥r√≥l (pl. gombnyom√°s alapj√°n).
- Mit jelent egy adat HEX (hexadecim√°lis) form√°tumban.
- Hogyan lehet LED-et vez√©relni t√°volr√≥l.
- Hogyan tud k√©t Arduino egym√°snak √ºzenni ‚Äì karaktereket, sz√∂vegeket tov√°bb√≠tani IR-rel.
- Hogyan f≈±z√ºnk √∂ssze t√∂bb karaktert egy √©rtelmes √ºzenett√©.
- Mi az a Caesar-k√≥d, hogyan lehet egy √ºzenetet k√≥dolni √©s dek√≥dolni.
- Milyen egyszer≈± eszk√∂z√∂kkel lehet komplex √©s izgalmas dolgokat √©p√≠teni!

---

üìé Fejleszt√©si √∂tletek
- V√°lasz-√ºzem (k√©tir√°ny√∫ IR kommunik√°ci√≥)
- T√∂bb men√ºpont vez√©rl√©se t√°vir√°ny√≠t√≥r√≥l
- Titkos√≠t√≥ algoritmus b≈ëv√≠t√©se (pl. XOR, kulcssz√≥)
- LED villog√°s Morse-k√≥dban IR parancs alapj√°n

