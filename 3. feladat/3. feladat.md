# üåÄ Rotary Encoder √©s LCD kijelz≈ë ‚Äì Arduino Projekt

Ez a projekt egy **8x2 karakteres LCD kijelz≈ë** √©s egy **rotary encoder** egy√ºttes haszn√°lat√°t mutatja be. A c√©l az LCD kezel√©s√©nek elsaj√°t√≠t√°sa, valamint egy **val√≥sidej≈± men√ºrendszer** kialak√≠t√°sa a rotary encoder seg√≠ts√©g√©vel.

‚úÖ Tartalomjegyz√©k
- [Alkatr√©szek](#alkatr√©szek)
- [Kapcsol√°si rajz](#kapcsol√°si-rajz)
- [L√©p√©sek](#l√©p√©sek)
- [K√≥d √©s magyar√°zat](#k√≥d-√©s-magyar√°zat)
- [K√©pek](#k√©pek)
- [Fejleszt√©si √∂tletek](#fejleszt√©si-√∂tletek)

---

## üß∞ Alkatr√©szek

| Eszk√∂z                    | Megjegyz√©s                  |
|---------------------------|-----------------------------|
| Arduino UNO               |                             |
| 8x2 karakteres LCD        |  p√°rhuzamos v√°ltozat        |
| Rotary Encoder            | GND, +, CLK, DT, SW l√°bak   |
| Breadboard + k√°belek      |                             |


### Ismerj√ºk meg az LCD-ket!

![image](https://github.com/user-attachments/assets/91db4bed-bd04-410e-a63b-39c450081c41)
> 8x2-es LCD kijelz≈ë

A 8x2-es LCD kijelz≈ë azt jelenti, hogy egyszerre 2 sorban 8 karaktert tud mutatni. P√°rhuzamos m√≥dban sok vezet√©ket haszn√°lunk, √≠gy az Arduino k√ºl√∂n l√°bakon k√ºldi az adatokat a kijelz≈ënek. Nem szabadon rajzolhatunk r√°, hanem csak bet≈±ket, sz√°mokat vagy el≈ëre meghat√°rozott jeleket tudunk megjelen√≠teni. Ezeket a karaktereket egy bels≈ë t√°bl√°zatb√≥l veszi el≈ë, de ak√°r saj√°t karaktert is tudunk felt√∂lteni, ha valami k√ºl√∂nleges jelet szeretn√©nk haszn√°lni.

![image](https://github.com/user-attachments/assets/c9db8946-716f-4887-8c29-470dd95f1279)
> Saj√°t karaktereket hozhatunk l√©tre √©s t√∂lthetj√ºk fel a kijelz≈ëre!

Weboldal a karakterek rajzol√°s√°hoz: https://chareditor.com/

---
## üîå Bek√∂t√©si √°bra


![connecting of the LCD to UNOI](/3.%20feladat/3-1.png)

> [!NOTE]
> A rotary encoder GND, +, CLK, DT √©s SW l√°bait tetsz≈ëleges digit√°lis portokra k√∂theted (pl. 2, 3, 4, 5, 6).

---

## üî¢ Projekt l√©p√©sek

### 1. LCD kijelz≈ë bek√∂t√©se √©s tesztel√©se

```cpp
#include <LiquidCrystal.h> // Telep√≠teni kell a k√∂nyvt√°rat

// Kijelz≈ë "l√©trehoz√°sa"
LiquidCrystal kijelzo(11, 12, 6, 7, 4, 5);

void setup() {
    // Kijelz≈ë ind√≠t√°sa
    kijelzo.begin(8, 2);

    // `Hello` kiirat√°sa a k√©perny≈ëre
    kijelzo.print("Hello");

    // a kurzor √°thejez√©se a kovetkez≈ë sorba
    kijelzo.setCursor(0, 1);

    // `Vilag!` kiirat√°sa a k√©perny≈ëre
    kijelzo.print("Vilag!");
}

void loop() 
{}
```

> [!NOTE]
>Ha I2C kijelz≈ët haszn√°lsz, a LiquidCrystal_I2C k√∂nyvt√°r sz√ºks√©ges, √©s az inicializ√°l√°s kijelzo.begin(8, 2); helyett pl. kijelzo.init(); lehet.

---

### 2. Soros portr√≥l olvasott adat megjelen√≠t√©se

>[!WARNING]
> A soros portr√≥l √≠rt sz√∂veg nem tartalmazhat √©kezetes karaktert! Erre figyeljetek!

```cpp
#include <LiquidCrystal.h> // Telep√≠teni kell a k√∂nyvt√°rat

// Kijelz≈ë "l√©trehoz√°sa"
LiquidCrystal kijelzo(11, 12, 6, 7, 4, 5);

void setup() {
    // Kijelz≈ë ind√≠t√°sa
    kijelzo.begin(8, 2);

    // Soros kapcsolat l√©trehoz√°sa
    Serial.begin(9600);
}

void loop() 
{
    // Ha a soros kapcsolat el√©rhet≈ë akkor hajtjuk v√©gre a programot
    if (Serial.available()) 
    {
        // √úzenet beolvas√°sa soros kapcsolatr√≥l
        String uzenet = Serial.readStringUntil('\n');

        // Kijelz≈ë "letakar√≠t√°sa"
        kijelzo.clear();

        // Kurzor a 0. sor 0. karakter√©re helyez√©se (0-t√≥l sz√°mozunk)
        kijelzo.setCursor(0, 0);

        // √úzenet ki√≠r√°sa
        kijelzo.print(uzenet);
    }
}
```

> [!IMPORTANT]
>A soros porton k√ºld√∂tt adat max. 8 karakter legyen soronk√©nt, k√ºl√∂nben nem f√©r ki a kijelz≈ëre.

---


### 3. Saj√°t karakterek megjelen√≠t√©se
```cpp
#include <LiquidCrystal.h> // Telep√≠teni kell a k√∂nyvt√°rat

// Kijelz≈ë "l√©trehoz√°sa"
LiquidCrystal kijelzo(11, 12, 6, 7, 4, 5);

// Egyedi karakter "rajzol√°sa"
byte nyil[] = {
    B00000,
    B00100,
    B01100,
    B11111,
    B01100,
    B00100,
    B00000,
    B00000
};

void setup() 
{
    // Egyedi karakter l√©trehoz√°sa
    kijelzo.createChar(0, nyil);

    // Kijelz≈ë ind√≠t√°sa
    kijelzo.begin(8, 2);

    // A kurzor a 0. sor 0. hely√©re  (0-t√≥l kezdj√ºk a sz√°mol√°st)
    kijelzo.setCursor(0, 0);

    // Az egyedi karakter ki√≠r√°sa
    kijelzo.write(byte(0));
}

void loop()
{}
```

> [!NOTE]
>A createChar() seg√≠ts√©g√©vel 8 saj√°t karaktert t√°rolhatsz (0‚Äì7 indexen).

---


### 4. Rotary encoder bek√∂t√©se √©s leolvas√°sa

![connecting of the LCD and rotary to UNOI](/3.%20feladat/3-2.png)
>_Figure 1: Rotary encoderrel kieg√©sz√≠tett √°ramk√∂r


![image](https://lastminuteengineers.com/wp-content/uploads/arduino/rotary-encoder-working-animation.gif)

A forg√≥ enk√≥der belsej√©ben egy r√©selt t√°rcsa forog, amely k√©t jelad√≥ l√°b (A √©s B) seg√≠ts√©g√©vel √©rz√©keli, merre forgatjuk a gombot. Az A √©s B jelek kis id≈ëeltol√°ssal (f√°ziselt√©r√©ssel) v√°ltakoznak, √©s ezek √∂sszehasonl√≠t√°s√°val meg tudjuk mondani, hogy az √≥ramutat√≥ j√°r√°s√°val megegyez≈ë vagy ellent√©tes ir√°nyba ford√≠tottuk el ‚Äì ezt nevezz√ºk kvadrat√∫ra k√≥dol√°snak.










```cpp
#include <LiquidCrystal.h> // Telep√≠teni kell a k√∂nyvt√°rat

// Kijelz≈ë "l√©trehoz√°sa"
LiquidCrystal kijelzo(11, 12, 6, 7, 4, 5);

// Az encoder bek√∂t√∂tt l√°bai
int encoderCLK = 2;
int encoderDT = 3;

// Seg√©d v√°ltoz√≥k a sz√°ml√°l√°shoz
int szamlalo = 0; 
int allapot = 0;
int elozoAllapot = 0;

void setup() {
    // Az encoder csatlakoz√≥i be√°ll√≠t√°sa bemeneti csatlakoz√≥knak
    pinMode(encoderCLK, INPUT);
    pinMode(encoderDT, INPUT);

    // Kijelz≈ë ind√≠t√°sa
    kijelzo.begin(8, 2);

    // `Ertek:` kiirat√°sa a 0. sor 0. hely√©re
    kijelzo.setCursor(0, 0);
    kijelzo.print("Ertek:");
}

void loop() {
    //
    // Minden kattan√°s 1, a k√∂ztes r√©sz 0 √©rt√©ket ad vissza
    allapot = digitalRead(encoderCLK); 

    if (allapot != elozoAllapot) // Csak egyszer hajtsuk v√©gre √°llapotonk√©nt
    {
        if (digitalRead(encoderDT) != allapot) // A DT √©rt√©ke az √°llapothoz 
        {
            // Sz√°ml√°l√≥ n√∂vel√©se
            szamlalo++;
        } 
        else 
        {
            // Sz√°ml√°l√≥ cs√∂kkent√©se
            szamlalo--;
        }
        
        // A kurzor elhelyez√©se az 1. sorba (0-t√≥l sz√°molva, teh√°t a 2. sorba)
        kijelzo.setCursor(0, 1);

        // Csak az adott sor t√∂rl√©se (sz√≥k√∂z√∂ket √≠runk ki)
        kijelzo.print("     ");
        
        // Ism√©t a sor elej√©re helyezz√ºk a kurzort
        kijelzo.setCursor(0, 1);

        // Kiiratjuk a sz√°ml√°l√≥t
        kijelzo.print(szamlalo);

        // √Ållapot friss√≠t√©se
        elozoAllapot = allapot;
    }
}
```

> [!TIP]
>A rotary encoder forg√°s√°nak ir√°ny√°t az encoderCLK √©s encoderDT l√°bak √°llapota alapj√°n hat√°rozzuk meg.

---


### 5. Extra: Men√º v√°lt√°s rotary encoderrel
```cpp
#include <LiquidCrystal.h> // Telep√≠teni kell a k√∂nyvt√°rat

// Kijelz≈ë "l√©trehoz√°sa"
LiquidCrystal kijelzo(11, 12, 6, 7, 4, 5);

// Az encoder bek√∂t√∂tt l√°bai
int encoderCLK = 2;
int encoderDT = 3;

// Seg√©d v√°ltoz√≥k a men√ºh√∂z
String menuPontok[] = {"Start", "Beall.", "Info", "Exit"};
int aktualis = 0;
int allapot = 0;
int elozoAllapot = 0;

void setup() {
    // Az encoder csatlakoz√≥i be√°ll√≠t√°sa bemeneti csatlakoz√≥knak
    pinMode(encoderCLK, INPUT);
    pinMode(encoderDT, INPUT);

    // Kijelz≈ë ind√≠t√°sa
    kijelzo.begin(8, 2);

    // `Ertek:` kiirat√°sa a 0. sor 0. hely√©re
    kijelzo.setCursor(0, 0);
    kijelzo.print("Ertek:");
}

void loop() {
    // Minden kattan√°s 1, a k√∂ztes r√©sz 0 √©rt√©ket ad vissza
    allapot = digitalRead(encoderCLK);  

    if (allapot != elozoAllapot) // Csak egyszer hajtsuk v√©gre √°llapotonk√©nt
    {
        if (digitalRead(encoderDT) != allapot) // A DT √©rt√©ke az √°llapothoz 
        {
            // Az aktu√°lis men√ºpont sorsz√°m√°nak n√∂vel√©se
            aktualis++;
        } 
        else 
        {
            // Az aktu√°lis men√ºpont sorsz√°m√°nak cs√∂kkent√©se
            aktualis--;
        }

        // Ha a sorsz√°m a men√ºn t√∫lmutat akkor korrig√°ljuk
        if (aktualis < 0) aktualis = 3;
        if (aktualis > 3) aktualis = 0;

        // Kijelz≈ë letakar√≠t√°sa
        kijelzo.clear();

        // A kurzor elhelyez√©se a 0. sor 0. oszlop√°ban
        kijelzo.setCursor(0, 0);

        // Egyedi ny√≠l karakter ki√≠r√°sa
        kijelzo.write(byte(0)); // ny√≠l karakter

        // Sz√≥k√∂z
        kijelzo.print(" ");

        // A kiv√°laszott men√ºpont ki√≠r√°sa a sorsz√°m alapj√°n
        kijelzo.print(menuPontok[aktualis]);

        // √Ållapot friss√≠t√©se
        elozoAllapot = allapot;
    }
}
```

> [!IMPORTANT]
>A men√ºpontokat egy karaktert√∂mbben (String menuPontok[]) t√°roljuk, √©s az encoderrel forgatva v√°ltjuk.

---

# üí° Fejleszt√©si √∂tletek
- Gombnyom√°sra aktiv√°lhat√≥ men√ºpont
- Hosszabb men√ºsor, t√∂bb oldalra bontva
- Szenzoradat (pl. h≈ëm√©rs√©klet) megjelen√≠t√©se men√ºpont alatt
- Kijelz≈ë h√°tt√©rvil√°g√≠t√°s√°nak szab√°lyoz√°sa

:

üéì Mit tanulunk ebb≈ël?
- Megtanuljuk, hogyan m≈±k√∂dik egy karakteres LCD kijelz≈ë, hogyan √≠rhatunk ki r√° sz√∂veget, sz√°mokat, vagy ak√°r saj√°t rajzolt karaktereket. Meg√©rtj√ºk, mit jelent az, hogy a kijelz≈ë 8x2 karakteres, √©s hogyan kell a kurzort kezelni.
- Megismerj√ºk a rotary encoder m≈±k√∂d√©s√©t, vagyis azt az eszk√∂zt, amit tekerve n√∂velni vagy cs√∂kkenteni tudunk egy √©rt√©ket. Azt is megtanuljuk, hogyan lehet √©rz√©kelni a forg√°s ir√°ny√°t √©s sebess√©g√©t.
- Elsaj√°t√≠tjuk, hogyan jelen√≠ts√ºnk meg v√°ltoz√≥ adatokat val√≥s id≈ëben: p√©ld√°ul egy sz√°ml√°l√≥t, amit teker√©s k√∂zben n√∂velhet√ºnk vagy cs√∂kkenthet√ºnk.
- K√©pesek lesz√ºnk egyszer≈± men√ºrendszert √©p√≠teni, ahol az encoderrel l√©ptethet√ºnk a men√ºpontok k√∂z√∂tt. Ez az alapja annak, hogy saj√°t felhaszn√°l√≥i fel√ºletet hozzunk l√©tre hardveres eszk√∂z√∂kh√∂z.
- Megtanuljuk, hogyan t√°roljunk t√∂bb sz√∂veget t√∂mbben, √©s dinamikusan √≠rjuk ki a kiv√°lasztott elemet a kijelz≈ëre ‚Äì hasonl√≥an egy igazi elektronikus k√©sz√ºl√©khez.
- Megismerj√ºk az egyedi karakterk√©sz√≠t√©s lehet≈ës√©g√©t: saj√°t ikonokat, nyilakat vagy szimb√≥lumokat is rajzolhatunk a kijelz≈ëre, √≠gy teljesen testreszabott megjelen√≠t√©st hozhatunk l√©tre.
- √ñsszek√∂tj√ºk az interaktivit√°st (encoder) a vizu√°lis visszajelz√©ssel (LCD) ‚Äì vagyis azt tanuljuk meg, hogyan kommunik√°lhat az eszk√∂z a felhaszn√°l√≥val.


