const int POWER_LAMP = 2;
const int LIGHT_SENSOR = A0;
const int LIGHT_THRESHOLD = 100;
String LampMode = "auto";
int LightValue = 0;

void setup() {
  Serial.begin(9600);
  pinMode(POWER_LAMP, OUTPUT);
  pinMode(LIGHT_SENSOR, INPUT);
}

void loop() {
  LightValue = analogRead(LIGHT_SENSOR);
  Serial.print("Light: ");
  Serial.println(LightValue);

  if (ShouldUseLamp()) {
    SetLamp("on");
    Serial.println("Lamp: ON");
  } else {
    SetLamp("off");
    Serial.println("Lamp: OFF");
  }

  delay(2000);
}

bool ShouldUseLamp() {
  if (LampMode == "on") return true;
  if (LampMode == "off") return false;
  return LightValue < LIGHT_THRESHOLD;
}

void SetLamp(String state) {
  digitalWrite(POWER_LAMP, state == "on" ? HIGH : LOW);
}
