#include <TFT_eSPI.h>

TFT_eSPI tft = TFT_eSPI();  // Kijelző példány

const int TEMP_SENSOR = A1;  // Hőmérséklet szenzor

int Temperature = 0;
int MinTemperature = 1000;  // irreálisan nagy indulóérték
int MaxTemperature = -1000; // irreálisan kicsi indulóérték

unsigned long RefreshTimer = 0;
const unsigned long RefreshInterval = 1000; // 1 másodpercenként frissít

void setup()
{
  Serial.begin(115200);
  tft.init();
  tft.setRotation(1);
  tft.fillScreen(TFT_BLACK);
  tft.setTextSize(2);
  tft.setTextFont(1);
}

void loop()
{
  // Hőmérséklet olvasása
  int rawTemp = analogRead(TEMP_SENSOR);
  Temperature = (rawTemp * 5.0 / 1024.0) * 100;

  // Minimum és maximum frissítése
  if (Temperature < MinTemperature) MinTemperature = Temperature;
  if (Temperature > MaxTemperature) MaxTemperature = Temperature;

  // Kijelző frissítése időközönként
  if (millis() - RefreshTimer > RefreshInterval)
  {
    tft.fillScreen(TFT_BLACK);
    tft.setCursor(0, 20);
    tft.setTextColor(TFT_WHITE, TFT_BLACK);
    
    tft.println("  Temperature:");
    tft.print("  Now: "); tft.print(Temperature); tft.println(" C");
    tft.print("  Min: "); tft.print(MinTemperature); tft.println(" C");
    tft.print("  Max: "); tft.print(MaxTemperature); tft.println(" C");

    RefreshTimer = millis();
  }
}
